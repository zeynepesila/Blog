(()=>{"use strict";var e={573:(e,t,o)=>{var r=o(751),a=o(641);const s={id:"app"};function n(e,t,o,r,n,i){const l=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",s,[(0,a.bF)(l)])}const i={name:"App"};var l=o(262);const u=(0,l.A)(i,[["render",n]]),m=u;var d=o(220);const c={class:"login-container"},p={class:"form-group"},h={class:"form-group"},k={class:"signup-link"};function y(e,t,o,s,n,i){const l=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",c,[t[8]||(t[8]=(0,a.Lk)("h2",null,"LOG IN",-1)),(0,a.Lk)("form",{onSubmit:t[2]||(t[2]=(0,r.D$)((...e)=>i.handleLogin&&i.handleLogin(...e),["prevent"]))},[(0,a.Lk)("div",p,[t[3]||(t[3]=(0,a.Lk)("label",{for:"email"},"E-posta:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e),id:"email",required:""},null,512),[[r.Jo,n.email]])]),(0,a.Lk)("div",h,[t[4]||(t[4]=(0,a.Lk)("label",{for:"password"},"Şifre:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e),id:"password",required:""},null,512),[[r.Jo,n.password]])]),t[5]||(t[5]=(0,a.Lk)("button",{type:"submit"},"Giriş Yap",-1))],32),(0,a.Lk)("p",k,[t[7]||(t[7]=(0,a.eW)(" Henüz üye değil misiniz? ",-1)),(0,a.bF)(l,{to:"/signup"},{default:(0,a.k6)(()=>t[6]||(t[6]=[(0,a.eW)("Kayıt Ol",-1)])),_:1,__:[6]})])])}var f=o(335);const g={name:"Login",data(){return{email:"",password:""}},methods:{async handleLogin(){try{const e=await f.A.post("http://localhost:8080/api/auth/login",{email:this.email,password:this.password}),t=e.data;localStorage.setItem("token",t.token),localStorage.setItem("role",t.role),"admin"===t.role?this.$router.push("/admin"):this.$router.push("/")}catch(e){const t=e.response?.data?.message||"Giriş başarısız. Lütfen tekrar deneyin.";alert(t),console.error("Giriş hatası:",e)}}}},b=(0,l.A)(g,[["render",y]]),L=b,v={class:"signup-container"},w={class:"form-group"},C={class:"form-group"},S={class:"form-group"},z={class:"form-group"},A={class:"login-link"};function _(e,t,o,s,n,i){const l=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",v,[t[13]||(t[13]=(0,a.Lk)("h2",null,"SIGN UP",-1)),(0,a.Lk)("form",{onSubmit:t[4]||(t[4]=(0,r.D$)((...e)=>i.handleSignup&&i.handleSignup(...e),["prevent"]))},[(0,a.Lk)("div",w,[t[5]||(t[5]=(0,a.Lk)("label",{for:"username"},"Username:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.username=e),id:"username",required:""},null,512),[[r.Jo,n.username]])]),(0,a.Lk)("div",C,[t[6]||(t[6]=(0,a.Lk)("label",{for:"email"},"E-posta:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"email","onUpdate:modelValue":t[1]||(t[1]=e=>n.email=e),id:"email",required:""},null,512),[[r.Jo,n.email]])]),(0,a.Lk)("div",S,[t[7]||(t[7]=(0,a.Lk)("label",{for:"password"},"Password:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>n.passwordHash=e),id:"password",required:""},null,512),[[r.Jo,n.passwordHash]])]),(0,a.Lk)("div",z,[t[9]||(t[9]=(0,a.Lk)("label",{for:"role"},"User Role:",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.role=e),id:"role",required:""},t[8]||(t[8]=[(0,a.Lk)("option",{value:"",disabled:""},"Choose Role",-1),(0,a.Lk)("option",{value:"user"},"Normal User",-1),(0,a.Lk)("option",{value:"editor"},"Editor",-1)]),512),[[r.u1,n.role]])]),t[10]||(t[10]=(0,a.Lk)("button",{type:"submit"},"Sign up",-1))],32),(0,a.Lk)("p",A,[t[12]||(t[12]=(0,a.eW)(" Do you already have an account? ",-1)),(0,a.bF)(l,{to:"/"},{default:(0,a.k6)(()=>t[11]||(t[11]=[(0,a.eW)("Sign in",-1)])),_:1,__:[11]})])])}const E={name:"Signup",data(){return{username:"",email:"",passwordHash:"",role:""}},methods:{async handleSignup(){try{await f.A.post("http://localhost:8080/api/auth/register",{username:this.username,email:this.email,passwordHash:this.password,role:this.role});alert("Kayit başarili! Giriş sayfasina yönlendiriliyorsunuz."),this.$router.push("/")}catch(e){alert("Kayıt başarısız! Lütfen tekrar deneyin."),console.error(e)}}}},P=(0,l.A)(E,[["render",_]]),I=P;var U=o(33);const Y={class:"admin-panel"},O=["onClick"],X={class:"comments"},$=["onClick"];function q(e,t,o,r,s,n){return(0,a.uX)(),(0,a.CE)("div",Y,[t[1]||(t[1]=(0,a.Lk)("h1",null,"Admin Paneli",-1)),t[2]||(t[2]=(0,a.Lk)("h2",null,"Yazılar",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.posts,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"post"},[(0,a.Lk)("h3",null,(0,U.v_)(e.title),1),(0,a.Lk)("p",null,[(0,a.Lk)("em",null,(0,U.v_)(e.summary),1)]),(0,a.Lk)("button",{onClick:t=>n.deletePost(e.id)},"Yazıyı Sil",8,O),(0,a.Lk)("div",X,[t[0]||(t[0]=(0,a.Lk)("h4",null,"Yorumlar",-1)),(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.comments,e=>((0,a.uX)(),(0,a.CE)("li",{key:e.id},[(0,a.eW)((0,U.v_)(e.authorName)+": "+(0,U.v_)(e.content)+" ",1),(0,a.Lk)("button",{onClick:t=>n.deleteComment(e.id)},"Sil",8,$)]))),128))])])]))),128))])}const M={name:"Admin",data(){return{posts:[]}},mounted(){this.fetchPosts()},methods:{async fetchPosts(){try{const e=localStorage.getItem("token"),t=await f.A.get("/api/posts",{headers:{Authorization:`Bearer ${e}`}});this.posts=t.data}catch(e){console.error("Yazılar alınamadı",e)}},async deletePost(e){if(confirm("Bu yazıyı silmek istediğinize emin misiniz?"))try{const t=localStorage.getItem("token");await f.A.delete(`/api/posts/${e}`,{headers:{Authorization:`Bearer ${t}`}}),this.fetchPosts()}catch(t){console.error("Yazı silinemedi",t)}},async deleteComment(e){if(confirm("Bu yorumu silmek istediğinize emin misiniz?"))try{const t=localStorage.getItem("token");await f.A.delete(`/api/comments/${e}`,{headers:{Authorization:`Bearer ${t}`}}),this.fetchPosts()}catch(t){console.error("Yorum silinemedi",t)}}}},V=(0,l.A)(M,[["render",q],["__scopeId","data-v-761970a9"]]),B=V,J={class:"editor"},j={class:"form-group"},x={class:"form-group"},F={class:"form-group"},G={key:0,class:"success"},H={key:1,class:"error"};function K(e,t,o,s,n,i){return(0,a.uX)(),(0,a.CE)("div",J,[t[8]||(t[8]=(0,a.Lk)("h1",null,"Yeni Yazı Oluştur",-1)),(0,a.Lk)("form",{onSubmit:t[3]||(t[3]=(0,r.D$)((...e)=>i.submitPost&&i.submitPost(...e),["prevent"]))},[(0,a.Lk)("div",j,[t[4]||(t[4]=(0,a.Lk)("label",{for:"title"},"Başlık",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.title=e),type:"text",id:"title",required:""},null,512),[[r.Jo,n.title]])]),(0,a.Lk)("div",x,[t[5]||(t[5]=(0,a.Lk)("label",{for:"summary"},"Özet",-1)),(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.summary=e),id:"summary",rows:"3",required:""},null,512),[[r.Jo,n.summary]])]),(0,a.Lk)("div",F,[t[6]||(t[6]=(0,a.Lk)("label",{for:"content"},"İçerik",-1)),(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.content=e),id:"content",rows:"8",required:""},null,512),[[r.Jo,n.content]])]),t[7]||(t[7]=(0,a.Lk)("button",{type:"submit"},"Yazıyı Yayınla",-1))],32),n.successMessage?((0,a.uX)(),(0,a.CE)("p",G,(0,U.v_)(n.successMessage),1)):(0,a.Q3)("",!0),n.errorMessage?((0,a.uX)(),(0,a.CE)("p",H,(0,U.v_)(n.errorMessage),1)):(0,a.Q3)("",!0)])}const W={name:"Editor",data(){return{title:"",summary:"",content:"",successMessage:"",errorMessage:""}},methods:{async submitPost(){try{const e=localStorage.getItem("token");await f.A.post("/api/posts",{title:this.title,summary:this.summary,content:this.content},{headers:{Authorization:`Bearer ${e}`}}),this.successMessage="Yazı başarıyla yayınlandı!",this.errorMessage="",this.title="",this.summary="",this.content=""}catch(e){this.successMessage="",this.errorMessage="Yazı yayınlanırken bir hata oluştu.",console.error(e)}}}},D=(0,l.A)(W,[["render",K],["__scopeId","data-v-49eda7dc"]]),N=D,T={class:"user-home"},Q={class:"comments"},R=["onSubmit"],Z=["onUpdate:modelValue"];function ee(e,t,o,s,n,i){return(0,a.uX)(),(0,a.CE)("div",T,[t[2]||(t[2]=(0,a.Lk)("h1",null,"Yazılar",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.posts,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"post"},[(0,a.Lk)("h2",null,(0,U.v_)(e.title),1),(0,a.Lk)("p",null,[(0,a.Lk)("em",null,(0,U.v_)(e.summary),1)]),(0,a.Lk)("div",Q,[t[1]||(t[1]=(0,a.Lk)("h4",null,"Yorumlar:",-1)),(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.comments,e=>((0,a.uX)(),(0,a.CE)("li",{key:e.id},[(0,a.Lk)("strong",null,(0,U.v_)(e.authorName)+":",1),(0,a.eW)(" "+(0,U.v_)(e.content),1)]))),128))]),(0,a.Lk)("form",{onSubmit:(0,r.D$)(t=>i.submitComment(e.id),["prevent"])},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t=>n.newComments[e.id]=t,placeholder:"Yorum yaz...",required:""},null,8,Z),[[r.Jo,n.newComments[e.id]]]),t[0]||(t[0]=(0,a.Lk)("button",{type:"submit"},"Gönder",-1))],40,R)])]))),128))])}const te={name:"UserHome",data(){return{posts:[],newComments:{}}},mounted(){this.fetchPosts()},methods:{async fetchPosts(){try{const e=localStorage.getItem("token"),t=await f.A.get("/api/posts",{headers:{Authorization:`Bearer ${e}`}});this.posts=t.data}catch(e){console.error("Postlar alınamadı",e)}},async submitComment(e){const t=this.newComments[e];if(t)try{const o=localStorage.getItem("token");await f.A.post(`/api/posts/${e}/comments`,{content:t},{headers:{Authorization:`Bearer ${o}`}}),this.newComments[e]="",this.fetchPosts()}catch(o){console.error("Yorum gönderilemedi",o)}}}},oe=(0,l.A)(te,[["render",ee],["__scopeId","data-v-dbaddbce"]]),re=oe,ae=[{path:"/",name:"Login",component:L},{path:"/signup",name:"Signup",component:I},{path:"/user",name:"UserHome",component:re,meta:{requiresAuth:!0,role:"user"}},{path:"/editor",name:"Editor",component:N,meta:{requiresAuth:!0,role:"editor"}},{path:"/admin",name:"Admin",component:B,meta:{requiresAuth:!0,role:"admin"}}],se=(0,d.aE)({history:(0,d.LA)(),routes:ae});se.beforeEach((e,t,o)=>{const r=localStorage.getItem("token"),a=localStorage.getItem("role");if(e.meta.requiresAuth){if(!r)return o("/");if(e.meta.role&&e.meta.role!==a)return alert("Bu sayfaya erişim izniniz yok."),o("/")}o()});const ne=se,ie=(0,r.Ef)(m);ie.use(ne),ie.mount("#app")}},t={};function o(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,o),s.exports}o.m=e,(()=>{var e=[];o.O=(t,r,a,s)=>{if(!r){var n=1/0;for(m=0;m<e.length;m++){for(var[r,a,s]=e[m],i=!0,l=0;l<r.length;l++)(!1&s||n>=s)&&Object.keys(o.O).every(e=>o.O[e](r[l]))?r.splice(l--,1):(i=!1,s<n&&(n=s));if(i){e.splice(m--,1);var u=a();void 0!==u&&(t=u)}}return t}s=s||0;for(var m=e.length;m>0&&e[m-1][2]>s;m--)e[m]=e[m-1];e[m]=[r,a,s]}})(),(()=>{o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),(()=>{o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{o.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{var e={524:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var a,s,[n,i,l]=r,u=0;if(n.some(t=>0!==e[t])){for(a in i)o.o(i,a)&&(o.m[a]=i[a]);if(l)var m=l(o)}for(t&&t(r);u<n.length;u++)s=n[u],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(m)},r=self["webpackChunkblog_frontend"]=self["webpackChunkblog_frontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=o.O(void 0,[504],()=>o(573));r=o.O(r)})();