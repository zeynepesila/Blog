{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"user-home\"\n};\nconst _hoisted_2 = {\n  class: \"comments\"\n};\nconst _hoisted_3 = [\"onSubmit\"];\nconst _hoisted_4 = [\"onUpdate:modelValue\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[2] || (_cache[2] = _createElementVNode(\"h1\", null, \"Yazılar\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.posts, post => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: post.id,\n      class: \"post\"\n    }, [_createElementVNode(\"h2\", null, _toDisplayString(post.title), 1 /* TEXT */), _createElementVNode(\"p\", null, [_createElementVNode(\"em\", null, _toDisplayString(post.summary), 1 /* TEXT */)]), _createCommentVNode(\" Yorumlar Listesi \"), _createElementVNode(\"div\", _hoisted_2, [_cache[1] || (_cache[1] = _createElementVNode(\"h4\", null, \"Yorumlar:\", -1 /* CACHED */)), _createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(post.comments, comment => {\n      return _openBlock(), _createElementBlock(\"li\", {\n        key: comment.id\n      }, [_createElementVNode(\"strong\", null, _toDisplayString(comment.authorName) + \":\", 1 /* TEXT */), _createTextVNode(\" \" + _toDisplayString(comment.content), 1 /* TEXT */)]);\n    }), 128 /* KEYED_FRAGMENT */))]), _createCommentVNode(\" Yeni Yorum Formu \"), _createElementVNode(\"form\", {\n      onSubmit: _withModifiers($event => $options.submitComment(post.id), [\"prevent\"])\n    }, [_withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": $event => $data.newComments[post.id] = $event,\n      placeholder: \"Yorum yaz...\",\n      required: \"\"\n    }, null, 8 /* PROPS */, _hoisted_4), [[_vModelText, $data.newComments[post.id]]]), _cache[0] || (_cache[0] = _createElementVNode(\"button\", {\n      type: \"submit\"\n    }, \"Gönder\", -1 /* CACHED */))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_3)])]);\n  }), 128 /* KEYED_FRAGMENT */))]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_Fragment","_renderList","$data","posts","post","key","id","_toDisplayString","title","summary","_createCommentVNode","_hoisted_2","comments","comment","authorName","content","onSubmit","_withModifiers","$event","$options","submitComment","newComments","placeholder","required","type"],"sources":["C:\\Users\\Zeynep Esila\\OneDrive\\Desktop\\Blog\\blog-frontend\\src\\views\\UserHome.vue"],"sourcesContent":["<template>\r\n  <div class=\"user-home\">\r\n    <h1>Yazılar</h1>\r\n\r\n    <div v-for=\"post in posts\" :key=\"post.id\" class=\"post\">\r\n      <h2>{{ post.title }}</h2>\r\n      <p><em>{{ post.summary }}</em></p>\r\n\r\n      <!-- Yorumlar Listesi -->\r\n      <div class=\"comments\">\r\n        <h4>Yorumlar:</h4>\r\n        <ul>\r\n          <li v-for=\"comment in post.comments\" :key=\"comment.id\">\r\n            <strong>{{ comment.authorName }}:</strong> {{ comment.content }}\r\n          </li>\r\n        </ul>\r\n\r\n        <!-- Yeni Yorum Formu -->\r\n        <form @submit.prevent=\"submitComment(post.id)\">\r\n          <input\r\n            v-model=\"newComments[post.id]\"\r\n            placeholder=\"Yorum yaz...\"\r\n            required\r\n          />\r\n          <button type=\"submit\">Gönder</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'UserHome',\r\n  data() {\r\n    return {\r\n      posts: [],\r\n      newComments: {}\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchPosts()\r\n  },\r\n  methods: {\r\n    async fetchPosts() {\r\n      try {\r\n        const token = localStorage.getItem('token')\r\n        const response = await axios.get('/api/posts', {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        })\r\n        this.posts = response.data\r\n      } catch (error) {\r\n        console.error('Postlar alınamadı', error)\r\n      }\r\n    },\r\n    async submitComment(postId) {\r\n      const content = this.newComments[postId]\r\n      if (!content) return\r\n\r\n      try {\r\n        const token = localStorage.getItem('token')\r\n        await axios.post(`/api/posts/${postId}/comments`, { content }, {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        })\r\n\r\n        this.newComments[postId] = ''\r\n        this.fetchPosts()  // Yorumları güncelle\r\n      } catch (error) {\r\n        console.error('Yorum gönderilemedi', error)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.user-home {\r\n  padding: 20px;\r\n}\r\n.post {\r\n  margin-bottom: 30px;\r\n  border: 1px solid #ddd;\r\n  padding: 15px;\r\n  border-radius: 5px;\r\n}\r\n.comments {\r\n  margin-top: 15px;\r\n}\r\ninput {\r\n  padding: 5px;\r\n  margin-right: 5px;\r\n  width: 70%;\r\n}\r\nbutton {\r\n  padding: 5px 10px;\r\n}\r\n</style>\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAW;;EAQbA,KAAK,EAAC;AAAU;;;;uBARzBC,mBAAA,CA2BM,OA3BNC,UA2BM,G,0BA1BJC,mBAAA,CAAgB,YAAZ,SAAO,sB,kBAEXF,mBAAA,CAuBMG,SAAA,QAAAC,WAAA,CAvBcC,KAAA,CAAAC,KAAK,EAAbC,IAAI;yBAAhBP,mBAAA,CAuBM;MAvBsBQ,GAAG,EAAED,IAAI,CAACE,EAAE;MAAEV,KAAK,EAAC;QAC9CG,mBAAA,CAAyB,YAAAQ,gBAAA,CAAlBH,IAAI,CAACI,KAAK,kBACjBT,mBAAA,CAAkC,YAA/BA,mBAAA,CAA2B,YAAAQ,gBAAA,CAApBH,IAAI,CAACK,OAAO,iB,GAEtBC,mBAAA,sBAAyB,EACzBX,mBAAA,CAiBM,OAjBNY,UAiBM,G,0BAhBJZ,mBAAA,CAAkB,YAAd,WAAS,qBACbA,mBAAA,CAIK,c,kBAHHF,mBAAA,CAEKG,SAAA,QAAAC,WAAA,CAFiBG,IAAI,CAACQ,QAAQ,EAAxBC,OAAO;2BAAlBhB,mBAAA,CAEK;QAFiCQ,GAAG,EAAEQ,OAAO,CAACP;UACjDP,mBAAA,CAA0C,gBAAAQ,gBAAA,CAA/BM,OAAO,CAACC,UAAU,IAAG,GAAC,iB,iBAAS,GAAC,GAAAP,gBAAA,CAAGM,OAAO,CAACE,OAAO,iB;sCAIjEL,mBAAA,sBAAyB,EACzBX,mBAAA,CAOO;MAPAiB,QAAM,EAAAC,cAAA,CAAAC,MAAA,IAAUC,QAAA,CAAAC,aAAa,CAAChB,IAAI,CAACE,EAAE;wBAC1CP,mBAAA,CAIE;uCAHSG,KAAA,CAAAmB,WAAW,CAACjB,IAAI,CAACE,EAAE,IAAAY,MAAA;MAC5BI,WAAW,EAAC,cAAc;MAC1BC,QAAQ,EAAR;wDAFSrB,KAAA,CAAAmB,WAAW,CAACjB,IAAI,CAACE,EAAE,G,6BAI9BP,mBAAA,CAAqC;MAA7ByB,IAAI,EAAC;IAAQ,GAAC,QAAM,oB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}